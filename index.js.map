{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '47504647-de6fca25d262a81a07b30a07f';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport const fetchImages = async (query, page, perPage = 15) => {\n  const response = await axios.get(BASE_URL, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: perPage,\n    },\n  });\n  return response.data;\n};\n","export const renderImages = images => {\n  const gallery = document.querySelector('.gallery');\n  const markup = images\n    .map(\n      image => `\n        <div class=\"gallery-item\">\n          <a href=\"${image.largeImageURL}\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n          </a>\n        </div>\n      `\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n};\n\nexport const clearGallery = () => {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = '';\n};\n\nexport const toggleLoadMoreButton = isVisible => {\n  const loadMoreButton = document.querySelector('.load-more');\n  loadMoreButton.style.display = isVisible ? 'block' : 'none';\n};\n\nexport const showEndMessage = () => {\n  alert(\"We're sorry, but you've reached the end of search results.\");\n};\n","import { fetchImages } from './js/pixabay-api.js';\nimport {\n  renderImages,\n  clearGallery,\n  toggleLoadMoreButton,\n  showEndMessage,\n} from './js/render-functions.js';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet query = '';\nlet page = 1;\nconst perPage = 15;\nlet totalHits = 0;\n\nconst form = document.querySelector('#search-form');\nconst loadMoreButton = document.querySelector('.load-more');\nconst gallery = document.querySelector('.gallery');\nlet lightbox = new SimpleLightbox('.gallery a');\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  query = event.target.elements.searchQuery.value.trim();\n  if (!query) return;\n\n  clearGallery();\n  page = 1;\n  toggleLoadMoreButton(false);\n\n  try {\n    const data = await fetchImages(query, page, perPage);\n    totalHits = data.totalHits;\n\n    if (data.hits.length === 0) {\n      alert('No images found for your query.');\n      return;\n    }\n\n    renderImages(data.hits);\n    lightbox.refresh();\n\n    if (totalHits > perPage) toggleLoadMoreButton(true);\n  } catch (error) {\n    console.error('Error fetching images:', error);\n  }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  page += 1;\n\n  try {\n    const data = await fetchImages(query, page, perPage);\n\n    renderImages(data.hits);\n    lightbox.refresh();\n\n    const galleryHeight =\n      gallery.firstElementChild.getBoundingClientRect().height;\n    window.scrollBy({\n      top: galleryHeight * 2,\n      behavior: 'smooth',\n    });\n\n    if (page * perPage >= totalHits) {\n      toggleLoadMoreButton(false);\n      showEndMessage();\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n  }\n});\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","axios","renderImages","images","gallery","markup","image","clearGallery","toggleLoadMoreButton","isVisible","loadMoreButton","showEndMessage","totalHits","form","lightbox","SimpleLightbox","event","data","error","galleryHeight"],"mappings":"6vBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEJC,EAAc,MAAOC,EAAOC,EAAMC,EAAU,MACtC,MAAMC,EAAM,IAAIL,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUC,CACX,CACL,CAAG,GACe,KCjBLE,EAAeC,GAAU,CACpC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAASF,EACZ,IACCG,GAAS;AAAA;AAAA,qBAEMA,EAAM,aAAa;AAAA,wBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,OAIzD,EACA,KAAK,EAAE,EACVF,EAAQ,mBAAmB,YAAaC,CAAM,CAChD,EAEaE,EAAe,IAAM,CAChC,MAAMH,EAAU,SAAS,cAAc,UAAU,EACjDA,EAAQ,UAAY,EACtB,EAEaI,EAAuBC,GAAa,CAC/C,MAAMC,EAAiB,SAAS,cAAc,YAAY,EAC1DA,EAAe,MAAM,QAAUD,EAAY,QAAU,MACvD,EAEaE,EAAiB,IAAM,CAClC,MAAM,4DAA4D,CACpE,ECjBA,IAAIb,EAAQ,GACRC,EAAO,EACX,MAAMC,EAAU,GAChB,IAAIY,EAAY,EAEhB,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CH,EAAiB,SAAS,cAAc,YAAY,EACpDN,EAAU,SAAS,cAAc,UAAU,EACjD,IAAIU,EAAW,IAAIC,EAAe,YAAY,EAE9CF,EAAK,iBAAiB,SAAU,MAAMG,GAAS,CAG7C,GAFAA,EAAM,eAAc,EACpBlB,EAAQkB,EAAM,OAAO,SAAS,YAAY,MAAM,OAC5C,EAAClB,EAEL,CAAAS,IACAR,EAAO,EACPS,EAAqB,EAAK,EAE1B,GAAI,CACF,MAAMS,EAAO,MAAMpB,EAAYC,EAAOC,EAAMC,CAAO,EAGnD,GAFAY,EAAYK,EAAK,UAEbA,EAAK,KAAK,SAAW,EAAG,CAC1B,MAAM,iCAAiC,EACvC,MACD,CAEDf,EAAae,EAAK,IAAI,EACtBH,EAAS,QAAO,EAEZF,EAAYZ,GAASQ,EAAqB,EAAI,CACnD,OAAQU,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,CAC9C,EACH,CAAC,EAEDR,EAAe,iBAAiB,QAAS,SAAY,CACnDX,GAAQ,EAER,GAAI,CACF,MAAMkB,EAAO,MAAMpB,EAAYC,EAAOC,EAAMC,CAAO,EAEnDE,EAAae,EAAK,IAAI,EACtBH,EAAS,QAAO,EAEhB,MAAMK,EACJf,EAAQ,kBAAkB,sBAAuB,EAAC,OACpD,OAAO,SAAS,CACd,IAAKe,EAAgB,EACrB,SAAU,QAChB,CAAK,EAEGpB,EAAOC,GAAWY,IACpBJ,EAAqB,EAAK,EAC1BG,IAEH,OAAQO,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,CAC9C,CACH,CAAC"}